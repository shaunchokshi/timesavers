# Schema reference: https://starship.rs/config-schema.json

# Global settings
add_newline = true
scan_timeout = 10
command_timeout=500
follow_symlinks=true
format = """
${custom.bash}${custom.zsh}${custom.fish}${custom.tztime}$fill${custom.uptime}
$shlvl$username $hostname $os @$directory ${custom.giturl}${custom.git_context} $fill$rust${custom.cargo_version}$conda$docker_context$python$nodejs${custom.ansible}$git_branch${custom.git_status}
$time${custom.sudo}$character
"""
#right_format = "${custom.dirty} ${custom.uptime}"

[custom.tztime]
command = 'date -u +"%a_%d-%b-%Y_%TZ"'
when = "true"
style = "#f4a046"
format = '[\[$symbol($output)\]]($style)'


# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Line 1: System + Path + Git context
[shlvl]
disabled=false
format = '[$symbol]($style)'
repeat = true
symbol = 'â¯'
repeat_offset = 1

[time]
disabled = false
style = "#f0bf00"
format = '# [$time]($style) '

[os]
format = "[$symbol]($style)"
style = "bold cyan"
disabled = false

[os.symbols]
Arch = "ïŒƒ "
CachyOS = "ïŒƒ "
Debian = "ïŒ† "
Fedora = "ïŒŠ "
FreeBSD = "ïŒŒ "
Linux = "ïŒš "
Macos = "îœ‘ "
NixOS = "ó±„… "
Pop = "ïŒª "
Raspbian = "ïŒ• "
Ubuntu = "ïŒ› "
Unknown = "ïƒ´ "

[username]
format = "[$user]($style)"
show_always = true
style_root = "fg:#fff000 bg:601010"
style_user = "#53f0f0"

[directory]
disabled = false
truncation_symbol = "repo: "
style = "bold #f4a0f6"
format = " [:$path]($style)[$read_only]($read_only_style)"
truncation_length = 3
truncate_to_repo = true


[hostname]
disabled = false
format = 'on [$ssh_symbol($hostname)]($style)'
ssh_only = false
style = "bold #f08fa0"

[status]
disabled = false
format = '[\[$status - $common_meaning\]](green)'

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Git context

[git_branch]
symbol = "ðŸŒ¿ "
style = "yellow"
format = ' [\[$symbol$branch\]]($style)'

[git_status]
ahead = "â‡¡${count} "
behind = "â‡£${count} "
diverged = "â‡•â‡¡${ahead_count}â‡£${behind_count} "
deleted = "âœ˜ "
style = "yellow"
untracked = ""
format = '([\[$conflicted$deleted$renamed$modified$staged$behind\]]($style) )'
modified = '*'

[git_commit]
format = '\\[[\\($hash$tag\\)]($style)\\]'

[git_metrics]
format = '\\[[+$added]($added_style)\\]\\[[-$deleted]($deleted_style)\\]'

[git_state]
format = '\\[[$state ($progress_current/$progress_total)]($style)\\]'
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Line 2: Environment (venv, language, etc.)

[python]
#format = "[îœ¼ $virtualenv ($version)]($style) "
format = '[îœ¼${symbol}${pyenv_prefix}(${version} )(\($virtualenv\))]($style)'

style = "bold yellow"

[nodejs]
format = "[îœ˜ ($version)]($style) "
style = "green"

[character]
success_symbol = "[\ufe5fó°§‚](bold green)"
error_symbol = "[\ufe5fî¯»](bold red)"

[env_var]
variable = "0"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Optional style enhancements

[cmd_duration]
disabled = false
format = "[$duration]($style) "
min_time = 1
show_milliseconds = true
style = "fg:text bg:surface0"

# Disable unneeded modules
[fill]
symbol = " "

[conda]
style = "fg:nord15 bg:none"
format = "[îƒ—]($style)[ conda $environment ](fg:nord0 bg:nord15)[î‚°]($style)"

[docker_context]
style = "fg:nord15 bg:none"
format = "[îƒ—]($style)[ docker $environment ](fg:nord0 bg:nord15)[î‚°]($style)"

[package]
#disabled = true
style = "fg:nord9 bg:none"
format = "[îƒ—]($style)[ $version ](fg:nord0 bg:nord9)[î‚°]($style)"

[sudo]
disabled = false
format = '[as $symbol]($style)'

[battery]
disabled = true

######### custom modules


[custom.cargo_version]
command = 'cat Cargo.toml|grep version|head -1|cut -f2 -d\"'
detect_extensions = ['rs']
detect_files = ['Cargo.toml']
style = 'green'

[custom.uptime]
command = "${HOME}/scripts/uptime.sh"
when = "true"
format = "[$symbol($output)](green)"

[custom.dirty]
command = "echo '*'"
when = "git-change"
style = "fg:red"
shell = "zsh"
#prefix = "status"
suffix = " "

[custom.git_status]
description = "git status which calls git directly"
command = "git_status_prompt || true"
when = "true"
style = "fg:bold red bg:green"
# current master version of how to specify formats
format = "[\\[$output\\]]($style) "
#disabled = true

[custom.ansible]
description = "Ansible version"
command = "echo -n $(ansible --version 2>/dev/null | grep ^ansible | awk '{ print $2 }') $(which ansible | sed -e s@$HOME/@@ -e s@/bin/ansible@@ -e s@/.virtual_env@@)"
when = """ test -n "${ANSIBLE_HOME}" """
files = [ "ansible.cfg" ]
shell = "/bin/bash"
symbol = "â’¶ "
format = "[$symbol$output]($style) "

[custom.sudo]
description = "valid sudo timestamp marker"
command = "echo -n 'ó±—’!'"
format = "[$symbol$output]($style) "
style = "bold fg:bright-red bg:green"
when = "sudo -vn &>/dev/null"

[custom.docker]
description = "Shows the docker symbol if the current directory has Dockerfile or docker-compose.yml files"
command = "echo ðŸ³"
files = ["Dockerfile", "docker-compose.yml", "docker-compose.yaml"]
when = """ command -v docker &> /dev/null; exit (echo $?); """
#prefix = "on "

[custom.giturl]
# disabled = true
description = "Display symbol for remote Git server"
command = "check-git-remote"
when = 'git rev-parse --is-inside-work-tree 2> /dev/null'
shell = ["bash", "--noprofile", "--norc"]
format = "at $output  "

[custom.bash]
command = "echo îž• "
when = """ test "$STARSHIP_SHELL" "==" "bash" """
format = "$output"

[custom.zsh]
command = "echo ðŸš€"
when = "test_zsh"
#prefix = ""

[custom.fish]
command = "echo ðŸŸ"
when = "test_fish"
#prefix = ""

[custom.jj_change]
description = "The working copy of the repo in your current directory: workspaces (if relevant), change ID, bookmarks"
command     = ''' jj log --no-graph -r=@ -T='separate(" ", working_copies, change_id.shortest(), bookmarks,)' '''
when        = ''' test -n "$(jj status)" || exit 1 '''
format      = 'on [$symbol ($output)]($style) '
symbol      = 'ðŸ¦'
style       = 'bold purple'
ignore_timeout  = true

[custom.jj_desc]
description = "The description of your working copy, if set"
command     = ''' jj log --no-graph -r=@ -T="description.first_line()" | awk '{if(length($0) > 25) {s = substr($0, 1, 25); sub(/[ \t\r\n]+$/, "", s); print s "â€¦"} else {print $0}}' '''
when        = ''' test -n "$(jj status)" -a -n "$(jj log --no-graph -r=@ -T='description')" || exit 1 '''
format      = '$symbol [($output)]($style) '
symbol      = '|'
ignore_timeout  = true

# ~/.config/starship.toml

[custom.rails]
command = "grep '^[[:space:]]*rails (' Gemfile.lock | grep -o '[0-9]\\+\\(\\.[0-9]\\+\\)\\{2,3\\}' | head -n 1"
detect_files = ['Gemfile.lock']
symbol = "îœ»"
style = "bg:color_blue"
format = '[[ $symbol( v$output) ](fg:color_fg0 bg:color_blue)]($style)'

[custom.vue]
command = """
rg --no-heading --no-line-number '"vue":' package.json | sed 's/.*"vue": "//;s/".*//'
"""
when = """
test -f package.json && rg -q '"vue":' package.json
"""
format = "[î£œ $output](#42b883) "
ignore_timeout = true

[custom.vuetify]
command = """
rg --no-heading --no-line-number '"vuetify":' package.json | sed 's/.*"vuetify": "//;s/".*//'
"""
when = """
test -f package.json && rg -q '"vuetify":' package.json
"""
format = " [î£ž $output](#0867CE)"
ignore_timeout = true

[custom.git_context]
command = """
  MAIN=$(git worktree list --porcelain 2>/dev/null | awk '/^worktree/ {print $2; exit}')
  CURR=$(git rev-parse --show-toplevel 2>/dev/null)
  [ -n "$MAIN" ] && [ "$MAIN" != "$CURR" ] && basename "$MAIN"
"""
format = "[$symbol$output]($style) "
shell = ["sh"]
style = "bold blue dimmed"
symbol = "ï“ "
when = """
  MAIN=$(git worktree list --porcelain 2>/dev/null | awk '/^worktree/ {print $2; exit}')
  CURR=$(git rev-parse --show-toplevel 2>/dev/null)
  [ -n "$MAIN" ] && [ "$MAIN" != "$CURR" ]
"""

# other langs/stuff

[golang]
symbol = "î˜§"
style = "fg:nord0 bg:nord9"
format = '[ $symbol $version ]($style)'

[rust]
format = 'via [$symbol($version $cargo_version )]($style)'
symbol = 'ðŸ¦€ '


######## disabled modules

[aws]
disabled=true
[hg_branch]
disabled = true
[dart]
disabled = true
[dotnet]
disabled = true
[elixir]
disabled = true
[elm]
disabled = true
[erlang]
disabled = true
[helm]
disabled = true
[julia]
disabled = true
[kotlin]
disabled = true
[nim]
disabled = true
[purescript]
disabled = true
[swift]
disabled = true
[zig]
disabled = true
[gcloud]
disabled = true
[openstack]
disabled = true
[crystal]
disabled = true
[jobs]
disabled = true

[palettes.nord]
nord0 = "#2E3440"
nord1 = "#3B4252"
nord2 = "#434C5E"
nord3 = "#4C566A"
nord4 = "#D8DEE9"
nord5 = "#E5E9F0"
nord6 = "#ECEFF4"
nord7 = "#8FBCBB"
nord8 = "#88C0D0"
nord9 = "#81A1C1"
nord10 = "#5E81AC"
nord11 = "#BF616A"
nord12 = "#D08770"
nord13 = "#EBCB8B"
nord14 = "#A3BE8C"
nord15 = "#B48EAD"

